<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Timesheet Application - C++ Migration Plan for Linux</title>
    <style>
        :root {
            --primary-color: #1976d2;
            --secondary-color: #dc004e;
            --success-color: #388e3c;
            --warning-color: #f57c00;
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --code-bg: #f8f9fa;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), #1565c0);
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .executive-summary {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid var(--primary-color);
        }
        
        .executive-summary h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .stack-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .stack-box {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stack-box.current {
            background: #ffebee;
            border: 2px solid var(--secondary-color);
        }
        
        .stack-box.target {
            background: #e8f5e9;
            border: 2px solid var(--success-color);
        }
        
        .stack-box h3 {
            margin-bottom: 10px;
        }
        
        .toc {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .toc h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .toc ol {
            columns: 2;
            column-gap: 40px;
        }
        
        .toc li {
            margin-bottom: 10px;
            break-inside: avoid;
        }
        
        .toc a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        section {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }
        
        section h3 {
            color: #424242;
            margin: 25px 0 15px 0;
        }
        
        section h4 {
            color: #616161;
            margin: 20px 0 10px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        th {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        pre {
            background: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            margin: 15px 0;
        }
        
        code {
            background: var(--code-bg);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        
        .phase-timeline {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .phase-card {
            background: linear-gradient(135deg, #f5f5f5, #ffffff);
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid var(--primary-color);
            transition: transform 0.2s;
        }
        
        .phase-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .phase-card h4 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
        }
        
        .phase-card .duration {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        
        .tech-item .name {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .tech-item .desc {
            font-size: 0.85rem;
            color: #666;
        }
        
        .architecture-diagram {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            white-space: pre;
            overflow-x: auto;
        }
        
        .risk-table tr.high {
            background: #ffebee;
        }
        
        .risk-table tr.medium {
            background: #fff3e0;
        }
        
        .risk-table tr.low {
            background: #e8f5e9;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .badge.primary {
            background: var(--primary-color);
            color: white;
        }
        
        .badge.success {
            background: var(--success-color);
            color: white;
        }
        
        .badge.warning {
            background: var(--warning-color);
            color: white;
        }
        
        .badge.danger {
            background: var(--secondary-color);
            color: white;
        }
        
        .gantt-chart {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }
        
        .gantt-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .gantt-label {
            width: 120px;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .gantt-bar-container {
            flex: 1;
            display: flex;
            height: 24px;
            background: #e0e0e0;
            border-radius: 4px;
        }
        
        .gantt-bar {
            height: 100%;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .checklist {
            list-style: none;
            padding: 0;
        }
        
        .checklist li {
            padding: 10px 15px;
            margin-bottom: 5px;
            background: #f8f9fa;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }
        
        .checklist li::before {
            content: "[ ]";
            margin-right: 10px;
            font-family: monospace;
            color: #666;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, var(--primary-color), #1565c0);
            color: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .metric-card .value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .metric-card .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .metric-card .improvement {
            margin-top: 10px;
            font-size: 0.85rem;
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
        }
        
        footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .stack-comparison {
                grid-template-columns: 1fr;
            }
            
            .toc ol {
                columns: 1;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Client Timesheet Application</h1>
        <p>C++ Migration Plan for Linux Environment</p>
    </header>
    
    <div class="container">
        <div class="executive-summary">
            <h2>Executive Summary</h2>
            <p>This document provides a comprehensive migration plan for converting the Client Timesheet Application from its current Node.js/React stack to a C++ backend running on Linux. The migration aims to achieve improved performance, reduced memory footprint, and native Linux integration while maintaining full feature parity with the existing application.</p>
            
            <div class="stack-comparison">
                <div class="stack-box current">
                    <h3>Current Stack</h3>
                    <p><strong>Node.js</strong> (Express.js)</p>
                    <p><strong>React</strong> (TypeScript)</p>
                    <p><strong>SQLite</strong></p>
                </div>
                <div class="stack-box target">
                    <h3>Target Stack</h3>
                    <p><strong>C++</strong> (Drogon Framework)</p>
                    <p><strong>React</strong> (Retained)</p>
                    <p><strong>SQLite</strong></p>
                </div>
            </div>
        </div>
        
        <nav class="toc">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#current-analysis">Current Application Analysis</a></li>
                <li><a href="#migration-strategy">Migration Strategy Overview</a></li>
                <li><a href="#technology-selection">Technology Selection</a></li>
                <li><a href="#migration-phases">Detailed Migration Phases</a></li>
                <li><a href="#architecture">Architecture Design</a></li>
                <li><a href="#code-migration">Code Migration Guide</a></li>
                <li><a href="#testing">Testing Strategy</a></li>
                <li><a href="#deployment">Deployment Strategy</a></li>
                <li><a href="#risk-assessment">Risk Assessment</a></li>
                <li><a href="#timeline">Timeline and Resources</a></li>
            </ol>
        </nav>
        
        <section id="current-analysis">
            <h2>1. Current Application Analysis</h2>
            
            <h3>1.1 Application Overview</h3>
            <p>The Client Timesheet Application is a full-stack web application for tracking employee work hours across multiple clients. It provides client management, time entry recording, reporting, and data export capabilities.</p>
            
            <h3>1.2 Current Technology Stack</h3>
            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Technology</th>
                        <th>Version</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Backend Runtime</td><td>Node.js</td><td>20.x</td></tr>
                    <tr><td>Backend Framework</td><td>Express.js</td><td>4.18.2</td></tr>
                    <tr><td>Database</td><td>SQLite3</td><td>5.1.6</td></tr>
                    <tr><td>Validation</td><td>Joi</td><td>17.11.0</td></tr>
                    <tr><td>Security</td><td>Helmet</td><td>7.1.0</td></tr>
                    <tr><td>Rate Limiting</td><td>express-rate-limit</td><td>7.1.5</td></tr>
                    <tr><td>CSV Export</td><td>csv-writer</td><td>1.6.0</td></tr>
                    <tr><td>PDF Export</td><td>pdfkit</td><td>0.13.0</td></tr>
                    <tr><td>Frontend Framework</td><td>React</td><td>19.2.0</td></tr>
                    <tr><td>UI Library</td><td>Material UI</td><td>7.3.6</td></tr>
                    <tr><td>State Management</td><td>TanStack Query</td><td>5.90.11</td></tr>
                    <tr><td>Build Tool</td><td>Vite</td><td>7.2.4</td></tr>
                </tbody>
            </table>
            
            <h3>1.3 API Endpoints Summary</h3>
            <table>
                <thead>
                    <tr>
                        <th>Endpoint</th>
                        <th>Method</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><code>/health</code></td><td>GET</td><td>Health check</td></tr>
                    <tr><td><code>/api/auth/login</code></td><td>POST</td><td>User login (email-based)</td></tr>
                    <tr><td><code>/api/auth/me</code></td><td>GET</td><td>Get current user</td></tr>
                    <tr><td><code>/api/clients</code></td><td>GET</td><td>List all clients</td></tr>
                    <tr><td><code>/api/clients/:id</code></td><td>GET</td><td>Get specific client</td></tr>
                    <tr><td><code>/api/clients</code></td><td>POST</td><td>Create client</td></tr>
                    <tr><td><code>/api/clients/:id</code></td><td>PUT</td><td>Update client</td></tr>
                    <tr><td><code>/api/clients/:id</code></td><td>DELETE</td><td>Delete client</td></tr>
                    <tr><td><code>/api/work-entries</code></td><td>GET/POST</td><td>List/Create work entries</td></tr>
                    <tr><td><code>/api/work-entries/:id</code></td><td>GET/PUT/DELETE</td><td>CRUD work entry</td></tr>
                    <tr><td><code>/api/reports/client/:id</code></td><td>GET</td><td>Get client report</td></tr>
                    <tr><td><code>/api/reports/export/csv/:id</code></td><td>GET</td><td>Export CSV</td></tr>
                    <tr><td><code>/api/reports/export/pdf/:id</code></td><td>GET</td><td>Export PDF</td></tr>
                </tbody>
            </table>
            
            <h3>1.4 Database Schema</h3>
            <pre>
-- Users table
CREATE TABLE users (
    email TEXT PRIMARY KEY,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Clients table
CREATE TABLE clients (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    description TEXT,
    department TEXT,
    email TEXT,
    user_email TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_email) REFERENCES users (email) ON DELETE CASCADE
);

-- Work entries table
CREATE TABLE work_entries (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    client_id INTEGER NOT NULL,
    user_email TEXT NOT NULL,
    hours DECIMAL(5,2) NOT NULL,
    description TEXT,
    date DATE NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE,
    FOREIGN KEY (user_email) REFERENCES users (email) ON DELETE CASCADE
);</pre>
        </section>
        
        <section id="migration-strategy">
            <h2>2. Migration Strategy Overview</h2>
            
            <h3>2.1 Recommended Approach: Backend-Only Migration</h3>
            <p>We recommend migrating only the backend to C++ while retaining the React frontend. This approach offers several advantages:</p>
            <ul style="margin: 15px 0 15px 30px;">
                <li><strong>Reduced Complexity:</strong> Frontend migration to C++ (Qt/GTK) would require complete rewrite</li>
                <li><strong>Faster Time-to-Market:</strong> React frontend can be reused with minimal changes</li>
                <li><strong>Maintained UX:</strong> Users experience no change in the interface</li>
                <li><strong>Easier Testing:</strong> API contract remains the same, enabling parallel testing</li>
                <li><strong>Team Flexibility:</strong> Frontend and backend teams can work independently</li>
            </ul>
            
            <h3>2.2 Migration Phases Overview</h3>
            <div class="phase-timeline">
                <div class="phase-card">
                    <h4>Phase 1: Foundation Setup</h4>
                    <div class="duration">Week 1-2</div>
                    <p>Development environment, build system, core libraries</p>
                </div>
                <div class="phase-card">
                    <h4>Phase 2: Database Layer</h4>
                    <div class="duration">Week 2-3</div>
                    <p>SQLite integration, models, migrations</p>
                </div>
                <div class="phase-card">
                    <h4>Phase 3: Core HTTP Server</h4>
                    <div class="duration">Week 3-4</div>
                    <p>Web framework, routing, middleware</p>
                </div>
                <div class="phase-card">
                    <h4>Phase 4: Auth & Security</h4>
                    <div class="duration">Week 4-5</div>
                    <p>Auth middleware, rate limiting, security headers</p>
                </div>
                <div class="phase-card">
                    <h4>Phase 5: Business Logic</h4>
                    <div class="duration">Week 5-7</div>
                    <p>CRUD operations, validation, error handling</p>
                </div>
                <div class="phase-card">
                    <h4>Phase 6: Reports & Export</h4>
                    <div class="duration">Week 7-8</div>
                    <p>CSV generation, PDF generation</p>
                </div>
                <div class="phase-card">
                    <h4>Phase 7: Integration & Testing</h4>
                    <div class="duration">Week 8-10</div>
                    <p>API testing, performance testing, frontend integration</p>
                </div>
                <div class="phase-card">
                    <h4>Phase 8: Deployment</h4>
                    <div class="duration">Week 10-12</div>
                    <p>Docker, CI/CD, documentation</p>
                </div>
            </div>
        </section>
        
        <section id="technology-selection">
            <h2>3. Technology Selection</h2>
            
            <h3>3.1 C++ Web Framework Comparison</h3>
            <table>
                <thead>
                    <tr>
                        <th>Framework</th>
                        <th>Performance</th>
                        <th>Ease of Use</th>
                        <th>Documentation</th>
                        <th>Recommendation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Drogon</strong></td>
                        <td>Excellent</td>
                        <td>Moderate</td>
                        <td>Good</td>
                        <td><span class="badge primary">Primary Choice</span></td>
                    </tr>
                    <tr>
                        <td>Crow</td>
                        <td>Good</td>
                        <td>Easy</td>
                        <td>Moderate</td>
                        <td><span class="badge success">Alternative</span></td>
                    </tr>
                    <tr>
                        <td>Oat++</td>
                        <td>Excellent</td>
                        <td>Moderate</td>
                        <td>Good</td>
                        <td><span class="badge success">Alternative</span></td>
                    </tr>
                    <tr>
                        <td>Pistache</td>
                        <td>Good</td>
                        <td>Easy</td>
                        <td>Limited</td>
                        <td><span class="badge warning">Not Recommended</span></td>
                    </tr>
                </tbody>
            </table>
            
            <h3>3.2 Selected Technology Stack</h3>
            <div class="tech-grid">
                <div class="tech-item">
                    <div class="name">Drogon 1.9.x</div>
                    <div class="desc">Web Framework</div>
                </div>
                <div class="tech-item">
                    <div class="name">nlohmann/json</div>
                    <div class="desc">JSON Handling</div>
                </div>
                <div class="tech-item">
                    <div class="name">SQLite3 + ORM</div>
                    <div class="desc">Database</div>
                </div>
                <div class="tech-item">
                    <div class="name">spdlog</div>
                    <div class="desc">Logging</div>
                </div>
                <div class="tech-item">
                    <div class="name">libharu</div>
                    <div class="desc">PDF Generation</div>
                </div>
                <div class="tech-item">
                    <div class="name">Google Test</div>
                    <div class="desc">Testing</div>
                </div>
                <div class="tech-item">
                    <div class="name">CMake</div>
                    <div class="desc">Build System</div>
                </div>
                <div class="tech-item">
                    <div class="name">vcpkg</div>
                    <div class="desc">Package Manager</div>
                </div>
            </div>
            
            <h3>3.3 Linux-Specific Features</h3>
            <ul style="margin: 15px 0 15px 30px;">
                <li><strong>epoll</strong> for efficient I/O multiplexing (via Drogon)</li>
                <li><strong>systemd</strong> for service management</li>
                <li><strong>Linux filesystem</strong> for file operations</li>
                <li><strong>POSIX threads</strong> for concurrency</li>
                <li><strong>Linux security modules</strong> (AppArmor/SELinux) compatibility</li>
            </ul>
        </section>
        
        <section id="migration-phases">
            <h2>4. Detailed Migration Phases</h2>
            
            <h3>4.1 Phase 1: Foundation Setup</h3>
            <h4>Development Environment Setup</h4>
            <pre>
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install -y \
    build-essential \
    cmake \
    git \
    libssl-dev \
    libsqlite3-dev \
    uuid-dev \
    zlib1g-dev \
    libc-ares-dev \
    libjsoncpp-dev \
    libpng-dev \
    pkg-config

# Install vcpkg
git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install

# Install Dependencies
./vcpkg install drogon nlohmann-json spdlog gtest libharu</pre>
            
            <h4>Project Structure</h4>
            <pre>
timesheet-cpp/
├── CMakeLists.txt
├── vcpkg.json
├── src/
│   ├── main.cpp
│   ├── config/
│   ├── controllers/
│   │   ├── AuthController.cpp
│   │   ├── ClientController.cpp
│   │   ├── WorkEntryController.cpp
│   │   └── ReportController.cpp
│   ├── models/
│   │   ├── User.h
│   │   ├── Client.h
│   │   └── WorkEntry.h
│   ├── middleware/
│   │   ├── AuthMiddleware.cpp
│   │   └── RateLimitMiddleware.cpp
│   ├── services/
│   │   ├── DatabaseService.cpp
│   │   ├── ValidationService.cpp
│   │   ├── CsvService.cpp
│   │   └── PdfService.cpp
│   └── utils/
├── tests/
├── config/
├── docker/
└── docs/</pre>
            
            <h3>4.2 Phase 2-3: Database & HTTP Server</h3>
            <p>The database layer will use SQLite3 with a custom C++ wrapper providing type-safe operations. The HTTP server will be built on Drogon's async I/O model using epoll for maximum performance on Linux.</p>
            
            <h4>Sample Controller Code</h4>
            <pre>
// ClientController.h
class ClientController : public drogon::HttpController&lt;ClientController&gt; {
public:
    METHOD_LIST_BEGIN
    ADD_METHOD_TO(ClientController::getAll, "/api/clients", drogon::Get);
    ADD_METHOD_TO(ClientController::create, "/api/clients", drogon::Post);
    ADD_METHOD_TO(ClientController::update, "/api/clients/{id}", drogon::Put);
    ADD_METHOD_TO(ClientController::remove, "/api/clients/{id}", drogon::Delete);
    METHOD_LIST_END
    
    void getAll(const drogon::HttpRequestPtr& req,
                std::function&lt;void(const drogon::HttpResponsePtr&)&gt;&& callback);
    // ... other methods
};</pre>
            
            <h3>4.3 Phase 4-5: Authentication & Business Logic</h3>
            <p>Authentication will be implemented as a Drogon filter (middleware) that validates the x-user-email header and creates users as needed. Validation will use custom C++ validators with regex support for email and date validation.</p>
            
            <h3>4.4 Phase 6: Reports & Export</h3>
            <p>CSV generation will use a custom lightweight implementation. PDF generation will use libharu for creating professional reports with tables, headers, and pagination support.</p>
        </section>
        
        <section id="architecture">
            <h2>5. Architecture Design</h2>
            
            <h3>5.1 High-Level Architecture</h3>
            <div class="architecture-diagram">
┌─────────────────────────────────────────────────────────────────────────┐
│                           Load Balancer (nginx)                          │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┴───────────────┐
                    │                               │
                    ▼                               ▼
┌─────────────────────────────────┐   ┌─────────────────────────────────┐
│      React Frontend (SPA)        │   │      C++ Backend (Drogon)        │
│  ┌───────────────────────────┐  │   │  ┌───────────────────────────┐  │
│  │   Static Files (nginx)    │  │   │  │     HTTP Server (epoll)   │  │
│  └───────────────────────────┘  │   │  └───────────────────────────┘  │
│                                  │   │              │                  │
│  ┌───────────────────────────┐  │   │  ┌───────────────────────────┐  │
│  │   Material UI Components  │  │   │  │      Middleware Stack     │  │
│  └───────────────────────────┘  │   │  │  - CORS                   │  │
│                                  │   │  │  - Rate Limiting          │  │
│  ┌───────────────────────────┐  │   │  │  - Authentication         │  │
│  │   TanStack Query          │  │   │  └───────────────────────────┘  │
│  └───────────────────────────┘  │   │              │                  │
│                                  │   │  ┌───────────────────────────┐  │
│  ┌───────────────────────────┐  │   │  │      Controllers          │  │
│  │   Axios HTTP Client       │──┼───┼─▶│  - Auth, Client, Entry    │  │
│  └───────────────────────────┘  │   │  └───────────────────────────┘  │
└─────────────────────────────────┘   │              │                  │
                                       │  ┌───────────────────────────┐  │
                                       │  │    SQLite Database        │  │
                                       │  └───────────────────────────┘  │
                                       └─────────────────────────────────┘
            </div>
            
            <h3>5.2 Thread Model</h3>
            <p>Drogon uses event-driven I/O (epoll on Linux) with a thread pool. The default thread count equals the number of CPU cores, providing optimal performance for concurrent request handling.</p>
        </section>
        
        <section id="code-migration">
            <h2>6. Code Migration Guide</h2>
            
            <h3>6.1 Express.js to Drogon Mapping</h3>
            <table>
                <thead>
                    <tr>
                        <th>Express.js</th>
                        <th>Drogon C++</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><code>app.get('/path', handler)</code></td><td><code>ADD_METHOD_TO(Controller::method, "/path", Get)</code></td></tr>
                    <tr><td><code>app.post('/path', handler)</code></td><td><code>ADD_METHOD_TO(Controller::method, "/path", Post)</code></td></tr>
                    <tr><td><code>app.use(middleware)</code></td><td><code>app.registerPreRoutingAdvice()</code> or Filter</td></tr>
                    <tr><td><code>req.body</code></td><td><code>req->getJsonObject()</code></td></tr>
                    <tr><td><code>req.params.id</code></td><td>Method parameter <code>int id</code></td></tr>
                    <tr><td><code>req.headers['x-header']</code></td><td><code>req->getHeader("x-header")</code></td></tr>
                    <tr><td><code>res.json(data)</code></td><td><code>HttpResponse::newHttpJsonResponse(json)</code></td></tr>
                    <tr><td><code>res.status(code)</code></td><td><code>resp->setStatusCode(code)</code></td></tr>
                    <tr><td><code>next()</code></td><td><code>chainCallback()</code></td></tr>
                </tbody>
            </table>
            
            <h3>6.2 Joi to C++ Validation Mapping</h3>
            <table>
                <thead>
                    <tr>
                        <th>Joi</th>
                        <th>C++ Equivalent</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><code>Joi.string().required()</code></td><td>Check <code>json.contains()</code> and <code>json.is_string()</code></td></tr>
                    <tr><td><code>Joi.string().max(255)</code></td><td>Check <code>str.length() <= 255</code></td></tr>
                    <tr><td><code>Joi.number().positive()</code></td><td>Check <code>num > 0</code></td></tr>
                    <tr><td><code>Joi.date().iso()</code></td><td>Regex match <code>\d{4}-\d{2}-\d{2}</code></td></tr>
                    <tr><td><code>Joi.string().email()</code></td><td>Regex match email pattern</td></tr>
                </tbody>
            </table>
        </section>
        
        <section id="testing">
            <h2>7. Testing Strategy</h2>
            
            <h3>7.1 Test Pyramid</h3>
            <table>
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Scope</th>
                        <th>Tools</th>
                        <th>Coverage Target</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Unit Tests (60%)</td><td>Individual functions</td><td>Google Test</td><td>80%</td></tr>
                    <tr><td>Integration Tests (30%)</td><td>API endpoints</td><td>Drogon Test Client</td><td>70%</td></tr>
                    <tr><td>E2E Tests (10%)</td><td>Full workflow</td><td>Selenium</td><td>Critical paths</td></tr>
                </tbody>
            </table>
            
            <h3>7.2 Test Commands</h3>
            <pre>
# Run all tests
cd build && ctest --output-on-failure

# Run specific test suite
./tests/test_clients

# Run with coverage
cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_COVERAGE=ON ..
make
ctest
lcov --capture --directory . --output-file coverage.info
genhtml coverage.info --output-directory coverage_report</pre>
        </section>
        
        <section id="deployment">
            <h2>8. Deployment Strategy</h2>
            
            <h3>8.1 Deployment Options</h3>
            <table>
                <thead>
                    <tr>
                        <th>Option</th>
                        <th>Pros</th>
                        <th>Cons</th>
                        <th>Recommended For</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Docker</td><td>Portable, isolated</td><td>Slight overhead</td><td><span class="badge primary">Production</span></td></tr>
                    <tr><td>Systemd</td><td>Native, efficient</td><td>Linux-only</td><td>Single server</td></tr>
                    <tr><td>Kubernetes</td><td>Scalable, resilient</td><td>Complex</td><td>Large scale</td></tr>
                </tbody>
            </table>
            
            <h3>8.2 Docker Configuration</h3>
            <pre>
# Production Dockerfile
FROM ubuntu:22.04 AS production

RUN apt-get update && apt-get install -y \
    libssl3 libsqlite3-0 libuuid1 zlib1g \
    && rm -rf /var/lib/apt/lists/*

RUN useradd -m -u 1001 appuser
WORKDIR /app

COPY --from=builder /app/build/timesheet-cpp .
COPY public ./public

USER appuser
ENV DATABASE_PATH=/app/data/timesheet.db
EXPOSE 3001

HEALTHCHECK --interval=30s --timeout=3s \
    CMD curl -f http://localhost:3001/health || exit 1

CMD ["./timesheet-cpp"]</pre>
        </section>
        
        <section id="risk-assessment">
            <h2>9. Risk Assessment and Mitigation</h2>
            
            <h3>9.1 Technical Risks</h3>
            <table class="risk-table">
                <thead>
                    <tr>
                        <th>Risk</th>
                        <th>Probability</th>
                        <th>Impact</th>
                        <th>Mitigation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="medium"><td>Memory leaks</td><td>Medium</td><td>High</td><td>Use smart pointers, ASAN testing</td></tr>
                    <tr class="medium"><td>Thread safety issues</td><td>Medium</td><td>High</td><td>Careful mutex usage, thread sanitizer</td></tr>
                    <tr class="high"><td>Build complexity</td><td>High</td><td>Medium</td><td>Comprehensive CMake, vcpkg</td></tr>
                    <tr class="medium"><td>Library compatibility</td><td>Medium</td><td>Medium</td><td>Pin versions, test matrix</td></tr>
                    <tr class="low"><td>Performance regression</td><td>Low</td><td>Medium</td><td>Benchmark suite, profiling</td></tr>
                </tbody>
            </table>
            
            <h3>9.2 Mitigation Strategies</h3>
            <pre>
// Memory Safety - Use smart pointers
std::unique_ptr&lt;Resource&gt; resource = std::make_unique&lt;Resource&gt;();
std::shared_ptr&lt;SharedResource&gt; shared = std::make_shared&lt;SharedResource&gt;();

// Thread Safety - Use mutex for shared state
std::mutex rateLimitMutex_;
std::lock_guard&lt;std::mutex&gt; lock(rateLimitMutex_);</pre>
        </section>
        
        <section id="timeline">
            <h2>10. Timeline and Resource Estimates</h2>
            
            <h3>10.1 Gantt Chart</h3>
            <div class="gantt-chart">
                <div style="display: flex; margin-bottom: 15px; font-size: 0.8rem; color: #666;">
                    <div style="width: 120px;"></div>
                    <div style="flex: 1; display: flex; justify-content: space-between;">
                        <span>Week 1</span><span>Week 3</span><span>Week 5</span><span>Week 7</span><span>Week 9</span><span>Week 11</span>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 1</div>
                    <div class="gantt-bar-container">
                        <div class="gantt-bar" style="width: 16.7%; background: #1976d2;">W1-2</div>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 2</div>
                    <div class="gantt-bar-container">
                        <div style="width: 8.3%;"></div>
                        <div class="gantt-bar" style="width: 12.5%; background: #388e3c;">W2-3</div>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 3</div>
                    <div class="gantt-bar-container">
                        <div style="width: 16.7%;"></div>
                        <div class="gantt-bar" style="width: 12.5%; background: #f57c00;">W3-4</div>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 4</div>
                    <div class="gantt-bar-container">
                        <div style="width: 25%;"></div>
                        <div class="gantt-bar" style="width: 8.3%; background: #7b1fa2;">W4-5</div>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 5</div>
                    <div class="gantt-bar-container">
                        <div style="width: 33.3%;"></div>
                        <div class="gantt-bar" style="width: 16.7%; background: #c2185b;">W5-7</div>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 6</div>
                    <div class="gantt-bar-container">
                        <div style="width: 50%;"></div>
                        <div class="gantt-bar" style="width: 12.5%; background: #00796b;">W7-8</div>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 7</div>
                    <div class="gantt-bar-container">
                        <div style="width: 58.3%;"></div>
                        <div class="gantt-bar" style="width: 16.7%; background: #455a64;">W8-10</div>
                    </div>
                </div>
                <div class="gantt-row">
                    <div class="gantt-label">Phase 8</div>
                    <div class="gantt-bar-container">
                        <div style="width: 75%;"></div>
                        <div class="gantt-bar" style="width: 16.7%; background: #d32f2f;">W10-12</div>
                    </div>
                </div>
            </div>
            
            <p><strong>Total Duration: 12 weeks</strong></p>
            
            <h3>10.2 Resource Requirements</h3>
            <table>
                <thead>
                    <tr>
                        <th>Role</th>
                        <th>FTE</th>
                        <th>Duration</th>
                        <th>Skills Required</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>C++ Developer</td><td>2</td><td>12 weeks</td><td>Modern C++, web frameworks</td></tr>
                    <tr><td>DevOps Engineer</td><td>0.5</td><td>4 weeks</td><td>Docker, CI/CD, Linux</td></tr>
                    <tr><td>QA Engineer</td><td>0.5</td><td>4 weeks</td><td>API testing, automation</td></tr>
                    <tr><td>Technical Lead</td><td>0.25</td><td>12 weeks</td><td>Architecture, code review</td></tr>
                </tbody>
            </table>
            
            <h3>10.3 Expected Performance Improvements</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="value">50,000</div>
                    <div class="label">Requests/sec</div>
                    <div class="improvement">10x improvement</div>
                </div>
                <div class="metric-card">
                    <div class="value">20MB</div>
                    <div class="label">Memory Usage</div>
                    <div class="improvement">5x reduction</div>
                </div>
                <div class="metric-card">
                    <div class="value">0.1s</div>
                    <div class="label">Startup Time</div>
                    <div class="improvement">20x faster</div>
                </div>
                <div class="metric-card">
                    <div class="value">5ms</div>
                    <div class="label">P99 Latency</div>
                    <div class="improvement">10x faster</div>
                </div>
            </div>
            
            <h3>10.4 Go-Live Checklist</h3>
            <ul class="checklist">
                <li>All unit tests passing (>80% coverage)</li>
                <li>All integration tests passing</li>
                <li>Performance benchmarks meet targets</li>
                <li>Security scan completed (no critical issues)</li>
                <li>Documentation complete</li>
                <li>Runbook created for operations</li>
                <li>Monitoring and alerting configured</li>
                <li>Rollback procedure tested</li>
                <li>Load testing completed</li>
                <li>Frontend integration verified</li>
                <li>Database migration tested</li>
                <li>CI/CD pipeline operational</li>
            </ul>
        </section>
    </div>
    
    <footer>
        <p>Client Timesheet Application - C++ Migration Plan</p>
        <p>Version 1.0 | February 2026 | Generated by Devin AI</p>
    </footer>
</body>
</html>
